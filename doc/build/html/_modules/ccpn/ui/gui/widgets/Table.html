<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ccpn.ui.gui.widgets.Table &mdash; Python  documentation</title>
    
    <link rel="stylesheet" href="../../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <link rel="top" title="Python  documentation" href="../../../../../index.html" />
    <link rel="up" title="Module code" href="../../../../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Python  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for ccpn.ui.gui.widgets.Table</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">Basic Usage:</span>
<span class="sd">  </span>
<span class="sd">  define a list of Column(columnName, func, tipText=tipText) objects, </span>
<span class="sd">  where func obtains the value for the object displayed in a row and</span>
<span class="sd">   tipText is optional;</span>
<span class="sd">  </span>
<span class="sd">  e.g. Column(&#39;index&#39;, lambda row: row.index, tipText=&#39;index of the row&#39;)</span>
<span class="sd">  </span>
<span class="sd">  define a list of objects (or empty):</span>
<span class="sd">  objectList = list(myObjects) if myObjects is not None else []</span>
<span class="sd">  </span>
<span class="sd">  define optional actionCallback and/or selectionCallback functions</span>
<span class="sd">  </span>
<span class="sd">  ObjectTable(parent=parent, columns=columnList, objects=objectList, </span>
<span class="sd">              actionCallback=actionCallback, selectionCallback=selectionCallback,</span>
<span class="sd">              ....)</span>
<span class="sd">  </span>
<span class="sd">  use setObjects(objects) method to set objects</span>
<span class="sd">  use show() to show</span>
<span class="sd">  use clearTable() to clear the table</span>


<span class="sd">Inherited from QTableView (http://pyqt.sourceforge.net/Docs/PyQt5/qtableview.html)</span>

<span class="sd">QTableView Class Reference</span>
<span class="sd">[QtGui module]</span>
<span class="sd">The QTableView class provides a default model/view implementation of a table view. More...</span>
<span class="sd">Inherits QAbstractItemView.</span>
<span class="sd">Inherited by QTableWidget.</span>

<span class="sd">Methods</span>

<span class="sd">    __init__ (self, QWidget parent = None)</span>
<span class="sd">    clearSpans (self)</span>
<span class="sd">    int columnAt (self, int x)</span>
<span class="sd">    columnCountChanged (self, int oldCount, int newCount)</span>
<span class="sd">    columnMoved (self, int column, int oldIndex, int newIndex)</span>
<span class="sd">    columnResized (self, int column, int oldWidth, int newWidth)</span>
<span class="sd">    int columnSpan (self, int row, int column)</span>
<span class="sd">    int columnViewportPosition (self, int column)</span>
<span class="sd">    int columnWidth (self, int column)</span>
<span class="sd">    currentChanged (self, QModelIndex current, QModelIndex previous)</span>
<span class="sd">    Qt.PenStyle gridStyle (self)</span>
<span class="sd">    hideColumn (self, int column)</span>
<span class="sd">    hideRow (self, int row)</span>
<span class="sd">    QHeaderView horizontalHeader (self)</span>
<span class="sd">    int horizontalOffset (self)</span>
<span class="sd">    horizontalScrollbarAction (self, int action)</span>
<span class="sd">    QModelIndex indexAt (self, QPoint p)</span>
<span class="sd">    bool isColumnHidden (self, int column)</span>
<span class="sd">    bool isCornerButtonEnabled (self)</span>
<span class="sd">    bool isIndexHidden (self, QModelIndex index)</span>
<span class="sd">    bool isRowHidden (self, int row)</span>
<span class="sd">    bool isSortingEnabled (self)</span>
<span class="sd">    QModelIndex moveCursor (self, QAbstractItemView.CursorAction cursorAction, Qt.KeyboardModifiers modifiers)</span>
<span class="sd">    paintEvent (self, QPaintEvent e)</span>
<span class="sd">    resizeColumnsToContents (self)</span>
<span class="sd">    resizeColumnToContents (self, int column)</span>
<span class="sd">    resizeRowsToContents (self)</span>
<span class="sd">    resizeRowToContents (self, int row)</span>
<span class="sd">    int rowAt (self, int y)</span>
<span class="sd">    rowCountChanged (self, int oldCount, int newCount)</span>
<span class="sd">    int rowHeight (self, int row)</span>
<span class="sd">    rowMoved (self, int row, int oldIndex, int newIndex)</span>
<span class="sd">    rowResized (self, int row, int oldHeight, int newHeight)</span>
<span class="sd">    int rowSpan (self, int row, int column)</span>
<span class="sd">    int rowViewportPosition (self, int row)</span>
<span class="sd">    scrollContentsBy (self, int dx, int dy)</span>
<span class="sd">    scrollTo (self, QModelIndex index, QAbstractItemView.ScrollHint hint = QAbstractItemView.EnsureVisible)</span>
<span class="sd">    selectColumn (self, int column)</span>
<span class="sd">    list-of-QModelIndex selectedIndexes (self)</span>
<span class="sd">    selectionChanged (self, QItemSelection selected, QItemSelection deselected)</span>
<span class="sd">    selectRow (self, int row)</span>
<span class="sd">    setColumnHidden (self, int column, bool hide)</span>
<span class="sd">    setColumnWidth (self, int column, int width)</span>
<span class="sd">    setCornerButtonEnabled (self, bool enable)</span>
<span class="sd">    setGridStyle (self, Qt.PenStyle style)</span>
<span class="sd">    setHorizontalHeader (self, QHeaderView header)</span>
<span class="sd">    setModel (self, QAbstractItemModel model)</span>
<span class="sd">    setRootIndex (self, QModelIndex index)</span>
<span class="sd">    setRowHeight (self, int row, int height)</span>
<span class="sd">    setRowHidden (self, int row, bool hide)</span>
<span class="sd">    setSelection (self, QRect rect, QItemSelectionModel.SelectionFlags command)</span>
<span class="sd">    setSelectionModel (self, QItemSelectionModel selectionModel)</span>
<span class="sd">    setShowGrid (self, bool show)</span>
<span class="sd">    setSortingEnabled (self, bool enable)</span>
<span class="sd">    setSpan (self, int row, int column, int rowSpan, int columnSpan)</span>
<span class="sd">    setVerticalHeader (self, QHeaderView header)</span>
<span class="sd">    setWordWrap (self, bool on)</span>
<span class="sd">    showColumn (self, int column)</span>
<span class="sd">    bool showGrid (self)</span>
<span class="sd">    showRow (self, int row)</span>
<span class="sd">    int sizeHintForColumn (self, int column)</span>
<span class="sd">    int sizeHintForRow (self, int row)</span>
<span class="sd">    sortByColumn (self, int column)</span>
<span class="sd">    sortByColumn (self, int column, Qt.SortOrder order)</span>
<span class="sd">    timerEvent (self, QTimerEvent event)</span>
<span class="sd">    updateGeometries (self)</span>
<span class="sd">    QHeaderView verticalHeader (self)</span>
<span class="sd">    int verticalOffset (self)</span>
<span class="sd">    verticalScrollbarAction (self, int action)</span>
<span class="sd">    QStyleOptionViewItem viewOptions (self)</span>
<span class="sd">    QRect visualRect (self, QModelIndex index)</span>
<span class="sd">    QRegion visualRegionForSelection (self, QItemSelection selection)</span>
<span class="sd">    bool wordWrap (self)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Licence, Reference and Credits</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (C) CCPN project (http://www.ccpn.ac.uk) 2014 - 2019&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Ed Brooksbank, Luca Mureddu, Timothy J Ragan &amp; Geerten W Vuister&quot;</span><span class="p">)</span>
<span class="n">__licence__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;CCPN licence. See http://www.ccpn.ac.uk/v3-software/downloads/license&quot;</span><span class="p">)</span>
<span class="n">__reference__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Skinner, S.P., Fogh, R.H., Boucher, W., Ragan, T.J., Mureddu, L.G., &amp; Vuister, G.W.&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;CcpNmr AnalysisAssign: a flexible platform for integrated NMR analysis&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;J.Biomol.Nmr (2016), 66, 111-124, http://doi.org/10.1007/s10858-016-0060-y&quot;</span><span class="p">)</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Last code modification</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__modifiedBy__</span> <span class="o">=</span> <span class="s2">&quot;$modifiedBy: CCPN $&quot;</span>
<span class="n">__dateModified__</span> <span class="o">=</span> <span class="s2">&quot;$dateModified: 2017-07-07 16:32:56 +0100 (Fri, July 07, 2017) $&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;$Revision: 3.0.b5 $&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Created</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;$Author: CCPN $&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s2">&quot;$Date: 2017-04-07 10:28:41 +0000 (Fri, April 07, 2017) $&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Start of code</span>
<span class="c1">#=========================================================================================</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">,</span> <span class="n">QtCore</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">ccpn.core.lib.CcpnSorting</span> <span class="kn">import</span> <span class="n">universalSortKey</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Base</span> <span class="kn">import</span> <span class="n">Base</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets</span> <span class="kn">import</span> <span class="n">MessageDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Label</span> <span class="kn">import</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.PulldownList</span> <span class="kn">import</span> <span class="n">PulldownList</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Splitter</span> <span class="kn">import</span> <span class="n">Splitter</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.TableModel</span> <span class="kn">import</span> <span class="n">ObjectTableModel</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.FileDialog</span> <span class="kn">import</span> <span class="n">FileDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.LineEdit</span> <span class="kn">import</span> <span class="n">LineEdit</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.ButtonList</span> <span class="kn">import</span> <span class="n">ButtonList</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.popups.Dialog</span> <span class="kn">import</span> <span class="n">CcpnDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.CheckBox</span> <span class="kn">import</span> <span class="n">CheckBox</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Frame</span> <span class="kn">import</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">ccpn.util.Logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">ccpn.core.lib.ContextManagers</span> <span class="kn">import</span> <span class="n">undoBlock</span>


<span class="n">BG_COLOR</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#E0E0E0&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="ObjectTable"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable">[docs]</a><span class="k">class</span> <span class="nc">ObjectTable</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableView</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">columnSizeHint</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># per collumn size hint (to be multiplied by number of collums)</span>
    <span class="n">rowSizeHint</span> <span class="o">=</span> <span class="mi">200</span>  <span class="c1"># total size hint (total size for all rows)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span>
                 <span class="n">objects</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">actionCallback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">selectionCallback</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">multiSelect</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">selectRows</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">numberRows</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">autoResize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">enableExport</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enableDelete</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">Base</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">objects</span> <span class="ow">or</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">actionCallback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontMetric</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFontMetricsF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontMetric</span><span class="o">.</span><span class="n">boundingRect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectionCallback</span> <span class="o">=</span> <span class="n">selectionCallback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actionCallback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAlternatingRowColors</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="n">autoResize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DefaultContextMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalScrollMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ScrollPerItem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setVerticalScrollMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ScrollPerItem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hiddenColumns</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">multiSelect</span> <span class="o">=</span> <span class="n">multiSelect</span>
        <span class="k">if</span> <span class="n">multiSelect</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ExtendedSelection</span><span class="p">)</span>
            <span class="c1"># + Continuous etc possible</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SingleSelection</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectRows</span> <span class="o">=</span> <span class="n">selectRows</span>
        <span class="k">if</span> <span class="n">selectRows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SelectItems</span><span class="p">)</span>
            <span class="c1"># + Columns possible</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setupModel</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AscendingOrder</span><span class="p">)</span>

        <span class="n">delegate</span> <span class="o">=</span> <span class="n">ObjectTableItemDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItemDelegate</span><span class="p">(</span><span class="n">delegate</span><span class="p">)</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">selectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_callback</span><span class="p">)</span>
        <span class="c1">#model.currentRowChanged.connect(self._callback)</span>

        <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span>
        <span class="n">header</span><span class="o">.</span><span class="n">setResizeMode</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">Interactive</span><span class="p">)</span>
        <span class="n">header</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">rowHeight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">+</span> <span class="mi">4</span>
        <span class="n">header</span><span class="o">.</span><span class="n">setMinimumSectionSize</span><span class="p">(</span><span class="n">rowHeight</span><span class="p">)</span>
        <span class="n">header</span><span class="o">.</span><span class="n">setDefaultSectionSize</span><span class="p">(</span><span class="n">rowHeight</span><span class="p">)</span>

        <span class="c1"># if numberRows:</span>
        <span class="c1"># header.setVisible(True)</span>
        <span class="c1"># else:</span>
        <span class="n">header</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="c1"># header = ObjectHeaderView(QtCore.Qt.Horizontal, self)</span>
        <span class="c1"># header.setMovable(True)</span>
        <span class="c1"># header.setMinimumSectionSize(30)</span>
        <span class="c1"># header.setDefaultSectionSize(30)</span>
        <span class="c1"># #header.setSortIndicatorShown(False)</span>
        <span class="c1"># #header.setStyleSheet(&#39;QHeaderView::down-arrow { image: url(icons/sort-up.png);} QHeaderView::up-arrow { image: url(icons/sort-down.png);}&#39;)</span>
        <span class="c1"># self.header = header</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupHeaderStretch</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setDragEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acceptDrops</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDragDropMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">InternalMove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDropIndicatorShown</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setHeaderContextMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setContextMenu</span><span class="p">(</span><span class="n">enableExport</span><span class="o">=</span><span class="n">enableExport</span><span class="p">,</span> <span class="n">enableDelete</span><span class="o">=</span><span class="n">enableDelete</span><span class="p">)</span>

<div class="viewcode-block" id="ObjectTable.mousePressEvent"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">ObjectTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_setHeaderContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CustomContextMenu</span><span class="p">)</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">customContextMenuRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_raiseHeaderContextMenu</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enableExport</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enableDelete</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableMenu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">enableExport</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tableMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Export Table&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">exportDialog</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">enableDelete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tableMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Delete&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteObjFromTable</span><span class="p">)</span>

        <span class="c1"># ejb - added these but don&#39;t think they are needed</span>
        <span class="c1"># self.tableMenu.addAction(&quot;Select All&quot;, self.selectAllObjects)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Clear Selection&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CustomContextMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customContextMenuRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_raiseTableContextMenu</span><span class="p">)</span>

<div class="viewcode-block" id="ObjectTable.clearTable"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.clearTable">[docs]</a>    <span class="k">def</span> <span class="nf">clearTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;remove all objects from the table&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjects</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="ObjectTable.sizeHint"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.sizeHint">[docs]</a>    <span class="k">def</span> <span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnSizeHint</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowSizeHint</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_setupModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">:</span>
            <span class="n">sortDetails</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sortColumn</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sortOrder</span><span class="p">())</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">sortDetails</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">objModel</span> <span class="o">=</span> <span class="n">ObjectTableModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">ObjectTableProxyModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">setSourceModel</span><span class="p">(</span><span class="n">objModel</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sortDetails</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">column</span><span class="p">,</span> <span class="n">order</span> <span class="o">=</span> <span class="n">sortDetails</span>
            <span class="n">model</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="k">return</span> <span class="n">model</span>

<div class="viewcode-block" id="ObjectTable.resizeEvent"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.resizeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">x</span>
            <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

        <span class="c1"># If the table is connected to a qtgui Splitter it</span>
        <span class="c1"># should not resize unless it is specifically asked to.</span>
        <span class="c1"># This helps avoiding infinite repaint loops.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="p">,</span> <span class="n">Splitter</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span> <span class="o">==</span> <span class="n">Splitter</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span> <span class="ow">or</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">doResize</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableView</span><span class="o">.</span><span class="n">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.clearSelection"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.clearSelection">[docs]</a>    <span class="k">def</span> <span class="nf">clearSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemSelection</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionCallback</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentIndex</span><span class="p">()</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>

            <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectRows</span><span class="p">:</span>
                <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">selection</span><span class="p">:</span>
                <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">]</span>
                <span class="n">rows</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

                <span class="n">objs</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                        <span class="n">row</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
                        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>
                        <span class="n">objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiSelect</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">selectionCallback</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiSelect</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">selectionCallback</span><span class="p">(</span><span class="n">objs</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>


            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selectionCallback</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

<div class="viewcode-block" id="ObjectTable.actionCallback"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.actionCallback">[docs]</a>    <span class="k">def</span> <span class="nf">actionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemSelection</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentIndex</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectRows</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selection</span><span class="p">:</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">]</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">row</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">setEditValue</span><span class="p">:</span>  <span class="c1"># ejb - editable fields don&#39;t actionCallback</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.hideColumnName"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.hideColumnName">[docs]</a>    <span class="k">def</span> <span class="nf">hideColumnName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hideColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getColumnInt</span><span class="p">(</span><span class="n">columnName</span><span class="o">=</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="ObjectTable.showColumnName"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.showColumnName">[docs]</a>    <span class="k">def</span> <span class="nf">showColumnName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getColumnInt</span><span class="p">(</span><span class="n">columnName</span><span class="o">=</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="ObjectTable.getCurrentIndex"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getCurrentIndex">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">index</span></div>

<div class="viewcode-block" id="ObjectTable.getCurrentObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getCurrentObject">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentObject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">row</span><span class="p">]</span></div>

<div class="viewcode-block" id="ObjectTable.getCurrentRow"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getCurrentRow">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentRow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.getSelectedRows"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getSelectedRows">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedRows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectRows</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">]</span>
        <span class="c1">#rows = list(set(rows))</span>
        <span class="c1">#rows.sort()</span>

        <span class="k">return</span> <span class="n">rows</span></div>

<div class="viewcode-block" id="ObjectTable.getSelectedObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getSelectedObjects">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectRows</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>

        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>
        <span class="n">selectedObjects</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="n">selectedObjects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objects</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">selectedObjects</span></div>

<div class="viewcode-block" id="ObjectTable.setCurrentRow"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setCurrentRow">[docs]</a>    <span class="k">def</span> <span class="nf">setCurrentRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>

        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setCurrentObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setCurrentObject">[docs]</a>    <span class="k">def</span> <span class="nf">setCurrentObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.selectRow"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.selectRow">[docs]</a>    <span class="k">def</span> <span class="nf">selectRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>

        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">selectionModel</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">SelectCurrent</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.selectObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.selectObject">[docs]</a>    <span class="k">def</span> <span class="nf">selectObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">SelectCurrent</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setSelectedObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setSelectedObjects">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectedObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">setCurrentObjects</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setCurrentObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setCurrentObjects">[docs]</a>    <span class="k">def</span> <span class="nf">setCurrentObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>

        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>
        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">uniqObjs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">objects</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">uniqObjs</span><span class="p">:</span>
                <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">rows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="n">selectMode</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span>
            <span class="n">select</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span>
            <span class="n">getIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
            <span class="n">mapFromSource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">getIndex</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                <span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectMode</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_highLightObjs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>

        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>

        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">uniqObjs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">objects</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">uniqObjs</span><span class="p">:</span>
                <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">rows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="n">selectMode</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span>
            <span class="n">select</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span>
            <span class="n">getIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
            <span class="n">mapFromSource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">getIndex</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                <span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectMode</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="c1"># self._callback(None)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setUpdatesEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">OtherFocusReason</span><span class="p">)</span>

<div class="viewcode-block" id="ObjectTable.getColumnInt"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getColumnInt">[docs]</a>    <span class="k">def</span> <span class="nf">getColumnInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columnName</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">heading</span> <span class="o">==</span> <span class="n">columnName</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span></div>

<div class="viewcode-block" id="ObjectTable.getColumn"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getColumn">[docs]</a>    <span class="k">def</span> <span class="nf">getColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columnName</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">heading</span> <span class="o">==</span> <span class="n">columnName</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">column</span></div>

<div class="viewcode-block" id="ObjectTable.setupHeaderStretch"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setupHeaderStretch">[docs]</a>    <span class="k">def</span> <span class="nf">setupHeaderStretch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="n">stretch</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>
        <span class="n">setColumnWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setColumnWidth</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">stretch</span><span class="p">:</span>
                <span class="n">header</span><span class="o">.</span><span class="n">setResizeMode</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
                <span class="n">stretch</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">objects</span><span class="p">:</span>
            <span class="n">minSize</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">(</span><span class="s1">&#39;MM&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
            <span class="n">colSizes</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">minSize</span><span class="p">,</span> <span class="n">bbox</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">heading</span><span class="p">)</span><span class="o">.</span><span class="n">width</span><span class="p">())</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">objCol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">[:</span><span class="mi">35</span><span class="p">]</span> <span class="o">+</span> <span class="n">objects</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">objCol</span><span class="o">.</span><span class="n">getFormatValue</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.5f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">value</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">)):</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                    <span class="n">size</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">colSizes</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="n">colSizes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">size</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">colSizes</span><span class="p">):</span>
                <span class="n">setColumnWidth</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">12</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">stretch</span><span class="p">:</span>
            <span class="n">header</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.closeEvent"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.closeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hideGraph</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hideFilter</span><span class="p">()</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableView</span><span class="o">.</span><span class="n">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.destroy"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graphPanel</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableView</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_raiseHeaderContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_addSearchWidget</span><span class="p">()</span>

        <span class="n">pos</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QPoint</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1">#move the popup a bit down. Otherwise can trigger an event if the pointer is just on top the first item</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">headerContextMenumenu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">()</span>
        <span class="n">columnsSettings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headerContextMenumenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Columns Settings...&quot;</span><span class="p">)</span>
        <span class="n">searchSettings</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">searchSettings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headerContextMenumenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headerContextMenumenu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">columnsSettings</span><span class="p">:</span>
            <span class="n">settingsPopup</span> <span class="o">=</span> <span class="n">ColumnViewSettingsPopup</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="p">,</span> <span class="n">hideColumns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_hiddenColumns</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">settingsPopup</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
            <span class="n">settingsPopup</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>  <span class="c1"># exclusive control to the menu and return _hiddencolumns</span>

        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">searchSettings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showSearchSettings</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_addSearchWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO:Luca Add search option for any table</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">parentLayout</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
                <span class="c1"># if hasattr(self._parent, &#39;getLayout&#39;):</span>
                <span class="n">parentLayout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">getLayout</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parentLayout</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">):</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="n">parentLayout</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">location</span> <span class="o">=</span> <span class="n">parentLayout</span><span class="o">.</span><span class="n">getItemPosition</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">rowSpan</span><span class="p">,</span> <span class="n">columnSpan</span> <span class="o">=</span> <span class="n">location</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="o">=</span> <span class="n">ObjectTableFilter</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                        <span class="n">parentLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">rowSpan</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">columnSpan</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">True</span>

<div class="viewcode-block" id="ObjectTable.showSearchSettings"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.showSearchSettings">[docs]</a>    <span class="k">def</span> <span class="nf">showSearchSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_raiseTableContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QPoint</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableMenu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>

<div class="viewcode-block" id="ObjectTable.exportDialog"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.exportDialog">[docs]</a>    <span class="k">def</span> <span class="nf">exportDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">saveDialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="s1">&#39;ccpn_Table.xlsx&#39;</span><span class="p">,</span>  <span class="c1">#default saving name</span>
                                     <span class="n">fileMode</span><span class="o">=</span><span class="n">FileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">,</span>
                                     <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;.xlsx;; .csv;; .tsv;; .json &quot;</span><span class="p">,</span>
                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Save as &#39;</span><span class="p">,</span>
                                     <span class="n">acceptMode</span><span class="o">=</span><span class="n">FileDialog</span><span class="o">.</span><span class="n">AcceptSave</span><span class="p">,</span>
                                     <span class="n">preferences</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveDialog</span><span class="o">.</span><span class="n">selectedFile</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">findExportFormats</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.findExportFormats"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.findExportFormats">[docs]</a>    <span class="k">def</span> <span class="nf">findExportFormats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">formatTypes</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;.xlsx&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataFrameToExcel</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataFrameToCsv</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;.tsv&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataFrameToTsv</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;.json&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataFrameToJson</span><span class="p">)</span>
            <span class="p">])</span>

        <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">path</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">formatTypes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">formatTypes</span><span class="p">[</span><span class="n">extension</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">tableToDataFrame</span><span class="p">(),</span> <span class="n">path</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">findExportFormats</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveDialog</span><span class="o">.</span><span class="n">selectedNameFilter</span><span class="p">())</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Format file not supported&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.dataFrameToExcel"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.dataFrameToExcel">[docs]</a>    <span class="k">def</span> <span class="nf">dataFrameToExcel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFrame</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">dataFrame</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Table&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.dataFrameToCsv"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.dataFrameToCsv">[docs]</a>    <span class="k">def</span> <span class="nf">dataFrameToCsv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFrame</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">dataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.dataFrameToTsv"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.dataFrameToTsv">[docs]</a>    <span class="k">def</span> <span class="nf">dataFrameToTsv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFrame</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">dataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.dataFrameToJson"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.dataFrameToJson">[docs]</a>    <span class="k">def</span> <span class="nf">dataFrameToJson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFrame</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">dataFrame</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;split&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.tableToDataFrame"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.tableToDataFrame">[docs]</a>    <span class="k">def</span> <span class="nf">tableToDataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">heading</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
        <span class="n">dataFrame</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">dataFrame</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dataFrame</span></div>

<div class="viewcode-block" id="ObjectTable.selectAllObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.selectAllObjects">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectAll</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.deleteObjFromTable"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.deleteObjFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">deleteObjFromTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Delete Item</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Delete </span><span class="si">%s</span><span class="s1">selected item</span><span class="si">%s</span><span class="s1"> from the project?&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">MessageDialog</span><span class="o">.</span><span class="n">showYesNo</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">selected</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;project&#39;</span><span class="p">):</span>
                <span class="n">thisProject</span> <span class="o">=</span> <span class="n">selected</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">project</span>

                <span class="c1"># thisProject._startCommandEchoBlock(&#39;application.table.deleteFromTable&#39;, [sI.pid for sI in selected])</span>
                <span class="k">with</span> <span class="n">undoBlock</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">selected</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">):</span>
                                <span class="c1"># print (&#39;&gt;&gt;&gt; deleting&#39;, obj)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">es</span><span class="p">:</span>
                        <span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">es</span><span class="p">))</span>
                    <span class="k">finally</span><span class="p">:</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                        <span class="c1"># thisProject._endCommandEchoBlock()</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="c1"># TODO:ED this is deleting from PandasTable, check for another way to get project</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">selected</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">):</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.filterRows"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.filterRows">[docs]</a>    <span class="k">def</span> <span class="nf">filterRows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hideGraph</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span> <span class="o">=</span> <span class="n">ObjectTableFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">()</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.hideFilter"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.hideFilter">[docs]</a>    <span class="k">def</span> <span class="nf">hideFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.unfilter"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.unfilter">[docs]</a>    <span class="k">def</span> <span class="nf">unfilter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">unfilterTable</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.getObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getObjects">[docs]</a>    <span class="k">def</span> <span class="nf">getObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filtered</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filtered</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">origObjects</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.copyRow"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.copyRow">[docs]</a>    <span class="k">def</span> <span class="nf">copyRow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
                <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
            <span class="n">cb</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">clipboard</span><span class="p">()</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">cb</span><span class="o">.</span><span class="n">Clipboard</span><span class="p">)</span>

            <span class="n">rowsStr</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">)</span>
            <span class="n">rowsStr</span> <span class="o">=</span> <span class="n">rowsStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;],&#39;</span><span class="p">,</span> <span class="s1">&#39;]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">rowsStr</span> <span class="o">=</span> <span class="n">rowsStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">rowsStr</span> <span class="o">=</span> <span class="n">rowsStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">rowsStr</span> <span class="o">=</span> <span class="n">rowsStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="n">cb</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">rowsStr</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">cb</span><span class="o">.</span><span class="n">Clipboard</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_syncFilterObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">applyFilter</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">applyFilter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">origObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>

            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">status</span>
            <span class="k">if</span> <span class="n">applyFilter</span> <span class="ow">and</span> <span class="p">(</span><span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filterPanel</span><span class="o">.</span><span class="n">filterTable</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>

<div class="viewcode-block" id="ObjectTable.replaceCurrentObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.replaceCurrentObject">[docs]</a>    <span class="k">def</span> <span class="nf">replaceCurrentObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>  <span class="c1"># the visible row</span>
        <span class="n">indexA</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">indexB</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">indexA</span><span class="p">)</span>  <span class="c1"># the underlying, original</span>

        <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_syncFilterObjects</span><span class="p">()</span>

        <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">indexA</span><span class="p">,</span> <span class="n">indexB</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.scrollToSelectedIndex"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.scrollToSelectedIndex">[docs]</a>    <span class="k">def</span> <span class="nf">scrollToSelectedIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">h</span><span class="o">.</span><span class="n">isSectionHidden</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="n">h</span><span class="o">.</span><span class="n">sectionViewportPosition</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectedRows</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scrollTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getSelectedRows</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">),</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">PositionAtCenter</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setObject">[docs]</a>    <span class="k">def</span> <span class="nf">setObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replaces an object in the _underlying_ list&quot;&quot;&quot;</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_syncFilterObjects</span><span class="p">()</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># the underlying, original</span>
        <span class="n">indexA</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>  <span class="c1"># the visible row</span>
        <span class="n">indexB</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">indexA</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">indexA</span><span class="p">,</span> <span class="n">indexB</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setRowObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setRowObject">[docs]</a>    <span class="k">def</span> <span class="nf">setRowObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replaces an object in the _visible_ rows&quot;&quot;&quot;</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="n">indexA</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># the visible row</span>
        <span class="n">indexB</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># the visible row</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">mapToSource</span><span class="p">(</span><span class="n">indexA</span><span class="p">)</span>  <span class="c1"># the underlying, original</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_syncFilterObjects</span><span class="p">()</span>

        <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">indexA</span><span class="p">,</span> <span class="n">indexB</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setObjectsAndColumns"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setObjectsAndColumns">[docs]</a>    <span class="k">def</span> <span class="nf">setObjectsAndColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">,</span> <span class="n">columns</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="c1"># self.setObjects([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumns</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjects</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="ObjectTable.setObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setObjects">[docs]</a>    <span class="k">def</span> <span class="nf">setObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">,</span> <span class="n">applyFilter</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">filterApplied</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filterApplied</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">searchWidget</span><span class="o">.</span><span class="n">updateSearchWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">selectedObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">()</span>  <span class="c1"># get current selection</span>
        <span class="n">getIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
        <span class="c1"># print(&#39;FRFF&#39;, getIndex)</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="n">sourceModel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">())</span>
        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentObject</span><span class="p">()</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
        <span class="n">sourceModel</span><span class="o">.</span><span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">beginInsertRows</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">(),</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">beginRemoveRows</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">(),</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">indexA</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">indexB</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">indexA</span><span class="p">,</span> <span class="n">indexB</span><span class="p">)</span>  <span class="c1"># the visible rows</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">endInsertRows</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">endRemoveRows</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
            <span class="n">selectionModel</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
            <span class="n">selectMode</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span>
            <span class="n">select</span> <span class="o">=</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span>
            <span class="n">getIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>

            <span class="n">mapFromSource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mapFromSource</span>

            <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">objects</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">selected</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">getIndex</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">mapFromSource</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">current</span><span class="p">:</span>
                        <span class="n">selectionModel</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">SelectCurrent</span><span class="p">)</span>

                    <span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectMode</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_silenceCallback</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">sortCol</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sortColumn</span><span class="p">()</span>
        <span class="n">sortOrder</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sortOrder</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">sortCol</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sortCol</span><span class="p">,</span> <span class="n">sortOrder</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_syncFilterObjects</span><span class="p">(</span><span class="n">applyFilter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupHeaderStretch</span><span class="p">()</span>
        <span class="c1"># if self.autoResize:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="c1"># self.setEnabled(False)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="c1"># self.horizontalHeader().setResizeMode(QtWidgets.QHeaderView.Interactive)</span>
        <span class="c1"># self.verticalHeader().setResizeMode(QtWidgets.QHeaderView.Fixed)</span>
        <span class="c1"># print (&#39;  &gt;&gt;&gt;setObjects&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setResizeMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Interactive</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setResizeMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Fixed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_highLightObjs</span><span class="p">(</span><span class="n">selectedObjects</span><span class="p">)</span>  <span class="c1"># set back again if possible</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="c1"># self.setEnabled(True)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTable.setColumns"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.setColumns">[docs]</a>    <span class="k">def</span> <span class="nf">setColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">):</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="n">sourceModel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sourceModel</span><span class="p">()</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">()</span>
        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentObject</span><span class="p">()</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="n">sourceModel</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">beginInsertColumns</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">(),</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">beginRemoveColumns</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">(),</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">indexA</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">indexB</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">indexA</span><span class="p">,</span> <span class="n">indexB</span><span class="p">)</span>  <span class="c1"># the visible rows</span>
        <span class="n">model</span><span class="o">.</span><span class="n">headerDataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">endInsertColumns</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">sourceModel</span><span class="o">.</span><span class="n">endRemoveColumns</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
            <span class="c1"># may need to now highlight more columns</span>
            <span class="n">selectionModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">selected</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">current</span><span class="p">:</span>
                    <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">SelectCurrent</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>
                    <span class="n">selectionModel</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">SelectCurrent</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">selectionModel</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Select</span> <span class="o">|</span> <span class="n">selectionModel</span><span class="o">.</span><span class="n">Rows</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setupHeaderStretch</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTable.getObject"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTable.getObject">[docs]</a>    <span class="k">def</span> <span class="nf">getObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">row</span><span class="p">]</span></div></div>

    <span class="c1"># def dragEnterEvent(self, event):</span>
    <span class="c1">#     event.accept()</span>
    <span class="c1">#</span>
    <span class="c1"># def dragMoveEvent(self, event):</span>
    <span class="c1">#     event.accept()</span>
    <span class="c1">#</span>
    <span class="c1"># def startDrag(self, event):</span>
    <span class="c1">#     print(&quot;startDrag called&quot;)</span>
    <span class="c1">#     index = self.indexAt(event.pos())</span>
    <span class="c1">#     print(index)</span>
    <span class="c1">#     if not index.isValid():</span>
    <span class="c1">#         return</span>
    <span class="c1">#</span>
    <span class="c1">#     self.moved_data = self.getObject(index.row())</span>
    <span class="c1">#</span>
    <span class="c1">#     drag = QtGui.QDrag(self)</span>
    <span class="c1">#</span>
    <span class="c1">#     mimeData = QtCore.QMimeData()</span>
    <span class="c1">#     mimeData.setData(&quot;application/blabla&quot;, &quot;&quot;)</span>
    <span class="c1">#     drag.setMimeData(mimeData)</span>
    <span class="c1">#</span>
    <span class="c1">#     pixmap = QtGui.QPixmap()</span>
    <span class="c1">#     pixmap = pixmap.grabWidget(self, self.visualRect(index))</span>
    <span class="c1">#     drag.setPixmap(pixmap)</span>
    <span class="c1">#</span>
    <span class="c1">#     result = drag.start(QtCore.Qt.MoveAction)</span>
    <span class="c1">#</span>
    <span class="c1"># # def dropEvent(self, event):</span>
    <span class="c1"># #   print(&quot;dropEvent called&quot;)</span>
    <span class="c1"># #   point = event.pos()</span>
    <span class="c1"># #   print(point)</span>
    <span class="c1">#</span>
    <span class="c1"># def mousePressEvent(self, event):</span>
    <span class="c1">#   if (event.button() == QtCore.Qt.LeftButton) and (</span>
    <span class="c1">#       event.modifiers() &amp; QtCore.Qt.ControlModifier):</span>
    <span class="c1">#       print(&quot;mousePressEvent called&quot;)</span>
    <span class="c1">#       self.startDrag(event)</span>
    <span class="c1">#   else:</span>
    <span class="c1">#     QtWidgets.QTableView.mousePressEvent(self, event)</span>


<span class="n">EDIT_ROLE</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">EditRole</span>


<div class="viewcode-block" id="ObjectTableItemDelegate"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableItemDelegate">[docs]</a><span class="k">class</span> <span class="nc">ObjectTableItemDelegate</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>

        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>

<div class="viewcode-block" id="ObjectTableItemDelegate.createEditor"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableItemDelegate.createEditor">[docs]</a>    <span class="k">def</span> <span class="nf">createEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentWidget</span><span class="p">,</span> <span class="n">itemStyle</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>  <span class="c1"># returns the edit widget</span>

        <span class="n">col</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
        <span class="n">objCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">objCol</span><span class="o">.</span><span class="n">editClass</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">objCol</span><span class="o">.</span><span class="n">editClass</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">objCol</span><span class="o">.</span><span class="n">editArgs</span><span class="p">,</span> <span class="o">**</span><span class="n">objCol</span><span class="o">.</span><span class="n">editKw</span><span class="p">)</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="n">parentWidget</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">return</span> <span class="n">widget</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()]</span>
            <span class="n">editValue</span> <span class="o">=</span> <span class="n">objCol</span><span class="o">.</span><span class="n">getEditValue</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">editValue</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="n">parentWidget</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">return</span> <span class="n">widget</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Use the default, type-dependant factory</span>
                <span class="c1"># Deals with strings, bools, date time etc.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="n">editor</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="o">.</span><span class="n">createEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentWidget</span><span class="p">,</span> <span class="n">itemStyle</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDoubleSpinBox</span><span class="p">):</span>
                    <span class="n">numDecimals</span> <span class="o">=</span> <span class="n">objCol</span><span class="o">.</span><span class="n">editDecimals</span>

                    <span class="k">if</span> <span class="n">numDecimals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">editor</span><span class="o">.</span><span class="n">setDecimals</span><span class="p">(</span><span class="n">numDecimals</span><span class="p">)</span>

                        <span class="k">if</span> <span class="n">objCol</span><span class="o">.</span><span class="n">editStep</span><span class="p">:</span>
                            <span class="n">editor</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="n">objCol</span><span class="o">.</span><span class="n">editStep</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">editor</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="o">-</span><span class="n">numDecimals</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">objCol</span><span class="o">.</span><span class="n">editStep</span><span class="p">:</span>
                        <span class="n">editor</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="n">objCol</span><span class="o">.</span><span class="n">editStep</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">editor</span></div>

<div class="viewcode-block" id="ObjectTableItemDelegate.setEditorData"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableItemDelegate.setEditorData">[docs]</a>    <span class="k">def</span> <span class="nf">setEditorData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>  <span class="c1"># provides the widget with data</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">EDIT_ROLE</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,)</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;setColor&#39;</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;setData&#39;</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;setValue&#39;</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;setFile&#39;</span><span class="p">):</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setFile</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Widget </span><span class="si">%s</span><span class="s1"> does not expose &quot;setData&quot;, &quot;set&quot; or &quot;setValue&quot; method; &#39;</span> <span class="o">%</span> <span class="n">widget</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;required for table proxy editing&#39;</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="o">.</span><span class="n">setEditorData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableItemDelegate.updateEditorGeometry"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableItemDelegate.updateEditorGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">updateEditorGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">itemStyle</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>  <span class="c1"># ensures that the editor is displayed correctly</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span><span class="p">:</span>
            <span class="n">cellRect</span> <span class="o">=</span> <span class="n">itemStyle</span><span class="o">.</span><span class="n">rect</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">cellRect</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">cellRect</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
            <span class="n">hint</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">hint</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">cellRect</span><span class="o">.</span><span class="n">height</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">):</span>  <span class="c1"># has a popup anyway</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">cellRect</span><span class="o">.</span><span class="n">topLeft</span><span class="p">())</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">cellRect</span><span class="o">.</span><span class="n">topLeft</span><span class="p">())</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Popup</span><span class="p">)</span>  <span class="c1"># popup so not confined</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">cellRect</span><span class="o">.</span><span class="n">width</span><span class="p">())</span>
                <span class="n">height</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hint</span><span class="o">.</span><span class="n">height</span><span class="p">(),</span> <span class="n">cellRect</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="o">.</span><span class="n">updateEditorGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">itemStyle</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableItemDelegate.setModelData"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableItemDelegate.setModelData">[docs]</a>    <span class="k">def</span> <span class="nf">setModelData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>  <span class="c1">#returns updated data</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">customWidget</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;getFile&#39;</span><span class="p">):</span>
                <span class="n">files</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">files</span><span class="p">:</span>
                    <span class="k">return</span>

                <span class="n">value</span> <span class="o">=</span> <span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Widget </span><span class="si">%s</span><span class="s1"> does not expose &quot;get&quot; or &quot;value&quot; method; &#39;</span> <span class="o">%</span> <span class="n">widget</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;required for table proxy editing&#39;</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="c1"># del widget</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
            <span class="n">model</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">EDIT_ROLE</span><span class="p">)</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStyledItemDelegate</span><span class="o">.</span><span class="n">setModelData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ObjectHeaderView"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectHeaderView">[docs]</a><span class="k">class</span> <span class="nc">ObjectHeaderView</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHeaderView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">parent</span></div>

    <span class="c1">#def sizeHint(self):</span>

    <span class="c1">#  return QtCore.QSize(30*len(self.table.columns), self.table.bbox(&#39;A&#39;).height())</span>

    <span class="c1">#def minimumSize(self):</span>
    <span class="c1">#</span>
    <span class="c1">#  return QtCore.QSize(30*len(self.table.columns), self.table.bbox(&#39;A&#39;).height())</span>


<span class="n">LESS_THAN</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSortFilterProxyModel</span><span class="o">.</span><span class="n">lessThan</span>


<div class="viewcode-block" id="ObjectTableProxyModel"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableProxyModel">[docs]</a><span class="k">class</span> <span class="nc">ObjectTableProxyModel</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSortFilterProxyModel</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>

        <span class="n">QtCore</span><span class="o">.</span><span class="n">QSortFilterProxyModel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">parent</span>

<div class="viewcode-block" id="ObjectTableProxyModel.lessThan"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableProxyModel.lessThan">[docs]</a>    <span class="k">def</span> <span class="nf">lessThan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leftIndex</span><span class="p">,</span> <span class="n">rightIndex</span><span class="p">):</span>

        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">objCol</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="n">leftIndex</span><span class="o">.</span><span class="n">column</span><span class="p">()]</span>

        <span class="k">if</span> <span class="n">objCol</span><span class="o">.</span><span class="n">orderFunc</span><span class="p">:</span>
            <span class="n">objects</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">objects</span>
            <span class="n">objA</span> <span class="o">=</span> <span class="n">objects</span><span class="p">[</span><span class="n">leftIndex</span><span class="o">.</span><span class="n">row</span><span class="p">()]</span>
            <span class="n">objB</span> <span class="o">=</span> <span class="n">objects</span><span class="p">[</span><span class="n">rightIndex</span><span class="o">.</span><span class="n">row</span><span class="p">()]</span>

            <span class="k">return</span> <span class="n">objCol</span><span class="o">.</span><span class="n">orderFunc</span><span class="p">(</span><span class="n">objA</span><span class="p">,</span> <span class="n">objB</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LESS_THAN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leftIndex</span><span class="p">,</span> <span class="n">rightIndex</span><span class="p">)</span></div></div>


<span class="n">TAB_FORMAT</span> <span class="o">=</span> <span class="s1">&#39;Tab-separated&#39;</span>
<span class="n">COMMA_FORMAT</span> <span class="o">=</span> <span class="s1">&#39;Comma-separated&#39;</span>
<span class="n">EXPORT_FORMATS</span> <span class="o">=</span> <span class="p">(</span><span class="n">TAB_FORMAT</span><span class="p">,</span> <span class="n">COMMA_FORMAT</span><span class="p">)</span>


<div class="viewcode-block" id="ObjectTableExport"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableExport">[docs]</a><span class="k">class</span> <span class="nc">ObjectTableExport</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="n">Base</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Tool</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Columns to export:&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Row Number&#39;</span><span class="p">,</span> <span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">heading</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Export format:&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatPulldown</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">EXPORT_FORMATS</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumWidth</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span></div>


<div class="viewcode-block" id="ColumnViewSettingsPopup"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ColumnViewSettingsPopup">[docs]</a><span class="k">class</span> <span class="nc">ColumnViewSettingsPopup</span><span class="p">(</span><span class="n">CcpnDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hideColumns</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Column Settings&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">CcpnDialog</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">windowTitle</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widgetColumnViewSettings</span> <span class="o">=</span> <span class="n">ColumnViewSettings</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">,</span> <span class="n">hideColumns</span><span class="o">=</span><span class="n">hideColumns</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">buttons</span> <span class="o">=</span> <span class="n">ButtonList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">],</span> <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">],</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Save the hidden columns to the table class. So it remembers when you open again the popup&#39;</span>
        <span class="n">hiddenColumns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetColumnViewSettings</span><span class="o">.</span><span class="n">_getHiddenColumns</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">_hiddenColumns</span> <span class="o">=</span> <span class="n">hiddenColumns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">hiddenColumns</span></div>


<span class="n">SEARCH_MODES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Literal&#39;</span><span class="p">,</span> <span class="s1">&#39;Case Sensitive Literal&#39;</span><span class="p">,</span> <span class="s1">&#39;Regular Expression&#39;</span><span class="p">]</span>
<span class="n">CheckboxTipText</span> <span class="o">=</span> <span class="s1">&#39;Select column to be visible on the table.&#39;</span>


<div class="viewcode-block" id="ColumnViewSettings"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ColumnViewSettings">[docs]</a><span class="k">class</span> <span class="nc">ColumnViewSettings</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; hide show check boxes corresponding to the table columns &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">hideColumns</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">Widget</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># self.hiddenColumns = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span> <span class="o">=</span> <span class="n">hideColumns</span> <span class="ow">or</span> <span class="p">[]</span>  <span class="c1"># list of column names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hideColumnWidths</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initCheckBoxes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Display Columns&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ColumnViewSettings.initCheckBoxes"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ColumnViewSettings.initCheckBoxes">[docs]</a>    <span class="k">def</span> <span class="nf">initCheckBoxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span>

        <span class="k">if</span> <span class="n">columns</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">colum</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;v&#39;</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">cb</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">colum</span><span class="o">.</span><span class="n">heading</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">checkBoxCallBack</span><span class="p">,</span>
                                  <span class="n">checked</span><span class="o">=</span><span class="bp">True</span> <span class="k">if</span> <span class="n">colum</span><span class="o">.</span><span class="n">heading</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
                                  <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">tipText</span><span class="o">=</span><span class="n">CheckboxTipText</span><span class="p">,</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cb</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">colum</span><span class="o">.</span><span class="n">heading</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">checkBoxCallBack</span><span class="p">,</span>
                                  <span class="n">checked</span><span class="o">=</span><span class="bp">True</span> <span class="k">if</span> <span class="n">colum</span><span class="o">.</span><span class="n">heading</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
                                  <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">tipText</span><span class="o">=</span><span class="n">CheckboxTipText</span><span class="p">,</span> <span class="p">)</span>

                <span class="n">cb</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.3</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">colum</span><span class="o">.</span><span class="n">heading</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_showColumn</span><span class="p">(</span><span class="n">colum</span><span class="o">.</span><span class="n">heading</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_hideColumn</span><span class="p">(</span><span class="n">colum</span><span class="o">.</span><span class="n">heading</span><span class="p">)</span></div>
        <span class="c1"># self.table._hiddenColumns = []</span>

    <span class="k">def</span> <span class="nf">_getHiddenColumns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span>

<div class="viewcode-block" id="ColumnViewSettings.checkBoxCallBack"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ColumnViewSettings.checkBoxCallBack">[docs]</a>    <span class="k">def</span> <span class="nf">checkBoxCallBack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">currentCheckBox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">currentCheckBox</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">checkedBoxes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">checkBox</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span><span class="p">:</span>
            <span class="n">checkBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">checkBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">checkedBoxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">checkBox</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">checkedBoxes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">currentCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showColumn</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_hideColumn</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1">#always display at least one columns, disables the last checkbox</span>
            <span class="n">currentCheckBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">currentCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnViewSettings.updateWidgets"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ColumnViewSettings.updateWidgets">[docs]</a>    <span class="k">def</span> <span class="nf">updateWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span><span class="p">:</span>
                <span class="n">cb</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkBoxes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initCheckBoxes</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_hideColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">hideColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">getColumnInt</span><span class="p">(</span><span class="n">columnName</span><span class="o">=</span><span class="n">name</span><span class="p">))</span>
        <span class="c1"># self._hideColumnWidths[name] = self.table.columnWidth(self.table.getColumnInt(columnName=name))</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># self.hiddenColumns.append(name)</span>

    <span class="k">def</span> <span class="nf">_showColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">showColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">getColumnInt</span><span class="p">(</span><span class="n">columnName</span><span class="o">=</span><span class="n">name</span><span class="p">))</span>
        <span class="c1"># if name in self._hideColumnWidths:</span>
        <span class="c1">#   self.table.setColumnWidth(self.table.getColumnInt(columnName=name), self._hideColumnWidths[name])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeColumnToContents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">getColumnInt</span><span class="p">(</span><span class="n">columnName</span><span class="o">=</span><span class="n">name</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideColumns</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ObjectTableFilter"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter">[docs]</a><span class="k">class</span> <span class="nc">ObjectTableFilter</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">Widget</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">origObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span>

        <span class="n">labelColumn</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Search in&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Search for&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edit</span> <span class="o">=</span> <span class="n">LineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span> <span class="o">=</span> <span class="n">ButtonList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">,</span> <span class="s1">&#39;Reset&#39;</span><span class="p">,</span> <span class="s1">&#39;Search&#39;</span><span class="p">],</span> <span class="n">tipTexts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Close Search&#39;</span><span class="p">,</span> <span class="s1">&#39;Restore Table&#39;</span><span class="p">,</span> <span class="s1">&#39;Search&#39;</span><span class="p">],</span>
                                        <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hideSearch</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restoreTable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">),</span>
                                                   <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">findOnTable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">widgetLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widgetLayout</span><span class="p">)</span>
        <span class="n">ws</span> <span class="o">=</span> <span class="p">[</span><span class="n">labelColumn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">ws</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumnOptions</span><span class="p">()</span>

<div class="viewcode-block" id="ObjectTableFilter.setColumnOptions"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.setColumnOptions">[docs]</a>    <span class="k">def</span> <span class="nf">setColumnOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">heading</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>
        <span class="n">objectsRange</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s1">&#39;Whole Table&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">texts</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">objectsRange</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableFilter.updateSearchWidgets"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.updateSearchWidgets">[docs]</a>    <span class="k">def</span> <span class="nf">updateSearchWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumnOptions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableFilter.hideSearch"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.hideSearch">[docs]</a>    <span class="k">def</span> <span class="nf">hideSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restoreTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">searchWidget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">searchWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObjectTableFilter.restoreTable"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.restoreTable">[docs]</a>    <span class="k">def</span> <span class="nf">restoreTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
        <span class="c1">#TODO:ED this works for all objects in the project EXCEPT PandasDataframes which</span>
        <span class="c1"># don&#39;t have _parent</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;_parent&#39;</span><span class="p">):</span>
                <span class="n">parentObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_parent</span>
                <span class="k">if</span> <span class="n">parentObjects</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parentObjects</span><span class="p">,</span> <span class="s1">&#39;_childClasses&#39;</span><span class="p">):</span>
                        <span class="n">cC</span> <span class="o">=</span> <span class="n">parentObjects</span><span class="o">.</span><span class="n">_childClasses</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cC</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parentObjects</span><span class="o">.</span><span class="n">_childClasses</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;_pluralLinkName&#39;</span><span class="p">):</span>
                                <span class="n">names</span> <span class="o">=</span> <span class="n">parentObjects</span><span class="o">.</span><span class="n">_childClasses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_pluralLinkName</span>
                                <span class="n">originalObjects</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parentObjects</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
                                <span class="n">table</span><span class="o">.</span><span class="n">setObjects</span><span class="p">(</span><span class="n">originalObjects</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">edit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableFilter.findOnTable"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.findOnTable">[docs]</a>    <span class="k">def</span> <span class="nf">findOnTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restoreTable</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origObjects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setObjects</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origObjects</span><span class="p">,</span> <span class="n">filterApplied</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">currentObject</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">allMatched</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)):</span>
                <span class="n">objCol</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">matched</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchMatches</span><span class="p">(</span><span class="n">objCol</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
                <span class="n">allMatched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matched</span><span class="p">)</span>
            <span class="n">matched</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">allMatched</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">m</span><span class="p">])</span>  <span class="c1">#making a single list of matching objs</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">objCol</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">columnOptions</span><span class="o">.</span><span class="n">currentObject</span><span class="p">()]</span>
            <span class="n">matched</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchMatches</span><span class="p">(</span><span class="n">objCol</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">matched</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setObjects</span><span class="p">(</span><span class="n">matched</span><span class="p">,</span> <span class="n">filterApplied</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">searchButtons</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restoreTable</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="n">MessageDialog</span><span class="o">.</span><span class="n">showWarning</span><span class="p">(</span><span class="s1">&#39;Not found&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ObjectTableFilter.searchMatches"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.searchMatches">[docs]</a>    <span class="k">def</span> <span class="nf">searchMatches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objCol</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">matched</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">objs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">objects</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">u&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">objCol</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">matched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">matched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matched</span></div>

<div class="viewcode-block" id="ObjectTableFilter.setFilteredObjects"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.ObjectTableFilter.setFilteredObjects">[docs]</a>    <span class="k">def</span> <span class="nf">setFilteredObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">getSelectedObjects</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setObjects</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Column"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.Column">[docs]</a><span class="k">class</span> <span class="nc">Column</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="n">getValue</span><span class="p">,</span> <span class="n">getEditValue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">setEditValue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">editClass</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">editArgs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">editKw</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tipText</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">getColor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">getIcon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">editDecimals</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">editStep</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">):</span>
        <span class="c1"># editDecimals=None, editStep=None, alignment=QtCore.Qt.AlignLeft,</span>
        <span class="c1"># orderFunc=None):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">heading</span> <span class="o">=</span> <span class="n">heading</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span> <span class="o">=</span> <span class="n">getValue</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultText</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getEditValue</span> <span class="o">=</span> <span class="n">getEditValue</span> <span class="ow">or</span> <span class="n">getValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEditValue</span> <span class="o">=</span> <span class="n">setEditValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editClass</span> <span class="o">=</span> <span class="n">editClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editArgs</span> <span class="o">=</span> <span class="n">editArgs</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editKw</span> <span class="o">=</span> <span class="n">editKw</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stretch</span> <span class="o">=</span> <span class="n">stretch</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editDecimals</span> <span class="o">=</span> <span class="n">editDecimals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editStep</span> <span class="o">=</span> <span class="n">editStep</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultIcon</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1">#self.alignment = ALIGN_OPTS.get(alignment, alignment) | Qt.AlignVCenter</span>
        <span class="c1"># Alignment combinations broken in PyQt5 v1.1.1</span>
        <span class="c1"># Use better default than top left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alignment</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span>
        <span class="c1"># self.orderFunc = orderFunc</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">getIcon</span> <span class="o">=</span> <span class="n">getIcon</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultIcon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getColor</span> <span class="o">=</span> <span class="n">getColor</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultColor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tipText</span> <span class="o">=</span> <span class="n">tipText</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checkTextAttrs</span><span class="p">()</span>

<div class="viewcode-block" id="Column.orderFunc"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.Column.orderFunc">[docs]</a>    <span class="k">def</span> <span class="nf">orderFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objA</span><span class="p">,</span> <span class="n">objB</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">universalSortKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">objA</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">universalSortKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">objB</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Column.getFormatValue"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.widgets.html#ccpn.ui.gui.widgets.Table.Column.getFormatValue">[docs]</a>    <span class="k">def</span> <span class="nf">getFormatValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span>
        <span class="k">if</span> <span class="n">format</span> <span class="ow">and</span> <span class="p">(</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">format</span> <span class="o">%</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span></div>

    <span class="k">def</span> <span class="nf">_checkTextAttrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">obj</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getEditValue</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getEditValue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getEditValue</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">obj</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setEditValue</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setEditValue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setEditValue</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getIcon</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QIcon</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">defaultIcon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getIcon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getIcon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultIcon</span>

    <span class="k">def</span> <span class="nf">_defaultText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">return</span> <span class="s1">&#39; &#39;</span>

    <span class="k">def</span> <span class="nf">_defaultColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">BG_COLOR</span>

    <span class="k">def</span> <span class="nf">_defaultIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultIcon</span></div>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Icon</span> <span class="kn">import</span> <span class="n">Icon</span>

    <span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Application</span> <span class="kn">import</span> <span class="n">TestApplication</span>
    <span class="kn">from</span> <span class="nn">ccpn.ui.gui.popups.Dialog</span> <span class="kn">import</span> <span class="n">CcpnDialog</span>
    <span class="kn">from</span> <span class="nn">ccpn.util</span> <span class="kn">import</span> <span class="n">Colour</span>


    <span class="n">app</span> <span class="o">=</span> <span class="n">TestApplication</span><span class="p">()</span>


    <span class="k">class</span> <span class="nc">mockObj</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="s1">&#39;Mock object to test the table widget editing properties&#39;</span>
        <span class="n">exampleStr</span> <span class="o">=</span> <span class="s1">&#39;exampleStr&#39;</span>
        <span class="n">integer</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">exampleFloat</span> <span class="o">=</span> <span class="mf">3.1</span>  <span class="c1"># This will create a double spin box</span>
        <span class="n">exampleBool</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c1"># This will create a check box</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>  <span class="c1"># This will create a line Edit</span>
        <span class="n">exampleList</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;Mock&#39;</span><span class="p">,</span> <span class="s1">&#39;Test&#39;</span><span class="p">),)</span>  <span class="c1"># This will create a pulldown</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;Red&#39;</span><span class="p">)</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">Icon</span><span class="p">(</span><span class="s1">&#39;icons/warning&#39;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Colour</span><span class="o">.</span><span class="n">colourNameToHexDict</span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">Colour</span><span class="o">.</span><span class="n">colourNameToHexDict</span><span class="p">[</span><span class="s1">&#39;yellow&#39;</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Colour</span><span class="o">.</span><span class="n">colourNameToHexDict</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">]</span>
        <span class="n">colouredIcons</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">r</span><span class="p">),</span> <span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">y</span><span class="p">),</span> <span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">b</span><span class="p">)]</span>

        <span class="n">flagsList</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">colouredIcons</span><span class="p">),</span> <span class="p">[</span><span class="n">Icon</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">colouredIcons</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">colouredIcons</span><span class="p">]</span>  <span class="c1"># This will create a pulldown. Make a list with the</span>

        <span class="c1"># same structure of pulldown setData function: (texts=None, objects=None, index=None,</span>
        <span class="c1"># icons=None, clear=True, headerText=None, headerEnabled=False, headerIcon=None)</span>

        <span class="k">def</span> <span class="nf">editBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleBool</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">editFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleFloat</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">editPulldown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleList</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">editStr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleStr</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">editFlags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>


    <span class="n">popup</span> <span class="o">=</span> <span class="n">CcpnDialog</span><span class="p">(</span><span class="n">windowTitle</span><span class="o">=</span><span class="s1">&#39;Test Table&#39;</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">cString</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Str&#39;</span><span class="p">,</span>
                     <span class="n">getValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleStr</span><span class="p">,</span>
                     <span class="n">setEditValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">editStr</span><span class="p">(</span><span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span>
                     <span class="n">getColor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                     <span class="p">)</span>

    <span class="n">cFloat</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Float&#39;</span><span class="p">,</span>
                    <span class="n">getValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleFloat</span><span class="p">,</span>
                    <span class="n">setEditValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">editFloat</span><span class="p">(</span><span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span>
                    <span class="n">editDecimals</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">editStep</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                    <span class="n">getColor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">r</span><span class="p">,</span>
                    <span class="p">)</span>
    <span class="n">cBool</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Bool&#39;</span><span class="p">,</span>
                   <span class="n">getValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleBool</span><span class="p">,</span>
                   <span class="n">setEditValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">editBool</span><span class="p">(</span><span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span>
                   <span class="n">getColor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">b</span><span class="p">,</span>
                   <span class="p">)</span>

    <span class="n">cPulldown</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Pulldown&#39;</span><span class="p">,</span>
                       <span class="n">getValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">exampleList</span><span class="p">,</span>
                       <span class="n">setEditValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">editPulldown</span><span class="p">(</span><span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span>
                       <span class="p">)</span>
    <span class="n">cIcon</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Icon&#39;</span><span class="p">,</span>
                   <span class="n">getValue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">getIcon</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">icon</span><span class="p">,</span>
                   <span class="p">)</span>
    <span class="n">cFlags</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="s1">&#39;Flags&#39;</span><span class="p">,</span>
                    <span class="n">getValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">flagsList</span><span class="p">,</span>
                    <span class="n">setEditValue</span><span class="o">=</span><span class="k">lambda</span> <span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">editFlags</span><span class="p">(</span><span class="n">mockObj</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span>
                    <span class="n">getColor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mockObj</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
                    <span class="p">)</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">ObjectTable</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">cString</span><span class="p">,</span> <span class="n">cFloat</span><span class="p">,</span> <span class="n">cBool</span><span class="p">,</span> <span class="n">cPulldown</span><span class="p">,</span> <span class="n">cIcon</span><span class="p">,</span> <span class="n">cFlags</span><span class="p">],</span> <span class="n">objects</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">table</span><span class="o">.</span><span class="n">setObjects</span><span class="p">([</span><span class="n">mockObj</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">popup</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">popup</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Python  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>